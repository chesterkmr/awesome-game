{"version":3,"sources":["logo.svg","App.js","theguy.png","missile.png","enemy.png","reportWebVitals.js","index.js"],"names":["App","canvasRef","React","current","ctx","getContext","keyMap","87","83","65","68","69","keyPressedMap","up","down","left","right","shoot","fillStyle","theGuyImage","Image","src","missileImage","enemyImage","score","x","y","drawImage","enemies","missiles","lastSpawnTime","lastMoveTime","window","addEventListener","e","which","keyCode","requestAnimationFrame","loop","timestamp","clearRect","nextMissile","unshift","filter","m","wasted","missile","enemyHit","find","diffX","Math","abs","diffY","dead","processShots","length","Date","now","enemy","processEnemies","drawEnemies","xPos","round","random","push","spawnEnemy","font","fillText","className","width","height","ref","style","border","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3f78ab5d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import * as React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nimport theGuySrc from './theguy.png';\nimport missileSrc from './missile.png';\nimport enemySrc from './enemy.png';\n\nfunction App() {\n\n  const canvasRef = React.useRef();\n\n  const movementListener = React.useCallback(() => {\n\n  }, [])\n\n  React.useEffect(() => {\n    if(!canvasRef.current) return;\n    const canvas = canvasRef.current;\n    const ctx = canvasRef.current.getContext('2d');\n\n\n    const keyMap = {\n      87: 'up',\n      83: 'down',\n      65: 'left',\n      68: 'right',\n      69: 'shoot',\n    }\n\n    const keyPressedMap = {\n      up: false,\n      down: false,\n      left: false,\n      right: false,\n      shoot: false,\n    }\n\n    ctx.fillStyle = \"#fff\"\n\n    const theGuyImage = new Image();\n\n    theGuyImage.src = theGuySrc\n\n    const missileImage = new Image();\n    missileImage.src = missileSrc\n\n    const enemyImage = new Image();\n    enemyImage.src = enemySrc;\n\n    let score = 0;\n\n    const imageHalfSize = 8;\n    const speed = 5;\n\n    let x = 250 - imageHalfSize;\n    let y = 250 - imageHalfSize;\n\n\n    ctx.drawImage(theGuyImage, x, y, 16, 16);\n\n    const move = () => {\n      if(keyPressedMap.up) {\n        y -= speed;\n      }\n      if(keyPressedMap.down) {\n        y += speed;\n      }\n      if(keyPressedMap.left) {\n        x-= speed;\n      }\n      if(keyPressedMap.right) {\n        x+= speed;\n      }\n      if(y < 0 ) {\n        y = 8\n      }\n\n      if(y > 500) {\n        y = 492\n      }\n\n      if(x < 0) {\n        x = 500\n      }\n\n      if(x > 500) {\n        x = 0\n      }\n\n      ctx.drawImage(theGuyImage, x, y, 16, 16);\n    }\n\n\n    let enemies = [];\n    let missiles = [];\n\n\n    const spawnEnemy = () => {\n      if(enemies.length >= 5) return;\n      const xPos = Math.round(Math.random() * (500 - 12));\n\n      enemies.push({y: 0, x: xPos, dead: false })\n    }\n\n    const shoot = () => {\n      if(keyPressedMap.shoot) {\n        keyPressedMap.shoot = false;\n        const nextMissile = {\n          x: x,\n          y: y\n        }\n  \n        missiles.unshift(nextMissile);\n\n      }\n\n      missiles = missiles.filter(m => !m.wasted)\n\n      for(let missile of missiles) {\n        missile.y = missile.y - speed;\n\n        ctx.drawImage(missileImage, missile.x, missile.y , 5, 8)\n      }\n\n      \n\n\n    }\n\n    const drawEnemies = () => {\n      for(let enemy of enemies) {\n        ctx.drawImage(enemyImage, enemy.x, enemy.y , 21, 26)\n      }\n    }\n\n    let lastSpawnTime = 0;\n    let lastMoveTime = 0;\n    let lastRender = 0;\n\n    const processEnemies = () => {\n      if(!enemies.length) return;\n      if(Date.now() - lastMoveTime >= 200) {\n\n      for(let enemy of enemies) {\n          if(enemy.dead) continue;\n\n          enemy.y+= speed;\n          lastMoveTime = Date.now()\n        \n      }\n\n      enemies = enemies.filter(e => !e.dead);\n    }\n    }\n\n    \n    const processShots = () => {\n      for(let missile of missiles) {\n        const enemyHit = enemies.find(e => {\n          const diffX = Math.abs(e.x -missile.x) ;\n          const diffY = Math.abs(e.y - missile.y)  ;\n          \n          return diffX <= 20 && diffY <= 20\n        });\n\n\n\n        if(enemyHit) {\n          enemyHit.dead = true;\n          missile.wasted = true;\n          score+= 1;\n        }\n      }\n    }\n\n    const loop = (timestamp) => {\n      ctx.clearRect(0, 0 , 500, 500);\n      move();\n      shoot();\n      processShots();\n      processEnemies();\n      drawEnemies()\n      \n      \n      if(Date.now() - lastSpawnTime >= 1000) {\n        spawnEnemy();\n        \n\n        lastSpawnTime = Date.now();\n      }\n\n      ctx.font = \"24px serif\";\n      ctx.fillStyle = \"red\";\n      ctx.fillText(`Score ${score}`, 10, 30)\n      window.requestAnimationFrame(loop)\n    }\n\n\n\n    window.addEventListener('mousedown', (e) => {\n      if(e.which === 1) {\n        keyPressedMap.shoot = true;\n      }\n    })\n\n    window.addEventListener('mouseup', (e) => {\n      if(e.which === 1) {\n        keyPressedMap.shoot = false;\n      }\n    })\n\n    window.addEventListener('keydown', (e) => {\n      keyPressedMap[keyMap[e.keyCode]] = true;\n    }, false);\n    window.addEventListener('keyup', (e) => {\n      keyPressedMap[keyMap[e.keyCode]] = false;\n    }, false)\n  \n    window.requestAnimationFrame(loop)\n\n  }, [canvasRef])\n\n  return (\n    <div className=\"App\">\n      <canvas width=\"500\" height=\"500\" ref={canvasRef} style={{border: \"1px solid skyblue\"}}></canvas>\n    </div>\n  );\n}\n\nexport default App;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAZElEQVQ4T7WTOw4AIAhDy+D9D+yAYcBgYsUEZSTlWT4KiiHFetwAFOC6DGDFFlR3Aqj2DmnNu9xqvzrwl5/MIM5hAe5a8MGdNjzrGCDmn7ewOLvZgmmoi6+AeIX0IjMH6V8rAwa8JRQRKIVX1QAAAABJRU5ErkJgggAA\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAYAAAAx8TU7AAAALUlEQVQYV2NkwAIYYWLPOTj+S/74AebDBP8jaWCkhqCdCS/czENnPsPNRHEYAOdZDAnkNXEgAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAaCAYAAABYQRdDAAAAo0lEQVRIS+2UzQ3AIAhG9eYK7j+cK3Cz0aixyo82pelBbxp4Ah9gjcKxCkxDQoNzUfrQA6D+30M9ABlscM78J9K3aiqKw3zU9OmFqsD6FlPdqFPq3WyLXb6jj8VgB5pcWlA9dGyvXWgFW26inkBzkgdKdo1OTaWJojSR9ik3YaTvKpSbvCmhA2U1HjfXbXFQnlhNMcUxoXrmjSMJtdCqs4kK9AJjK0wbwFdNJwAAAABJRU5ErkJgggAA\"","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}